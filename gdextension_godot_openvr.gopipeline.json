{
   "environment_variables": [
      {
         "name": "GODOT_STATUS",
         "value": "gdextension.godot_openvr"
      }
   ],
   "group": "gamma",
   "label_template": "gdextension.godot_openvr.${gdextension-cpp_pipeline_dependency}.${COUNT}",
   "materials": [
      {
         "name": "gdextension-cpp_pipeline_dependency",
         "pipeline": "gdextension-cpp",
         "stage": "godotCppStage",
         "type": "dependency"
      },
      {
         "branch": "groups-4.0",
         "destination": "p",
         "ignore_for_scheduling": false,
         "name": "p",
         "shallow_clone": false,
         "type": "git",
         "url": "https://github.com/V-Sekai/godot_openvr.git"
      }
   ],
   "name": "gdextension-godot-openvr",
   "stages": [
      {
         "jobs": [
            {
               "artifacts": [
                  {
                     "destination": "",
                     "source": "p/demo/addons/godot-openvr/bin/win64/libgodot_openvr.dll",
                     "type": "build"
                  },
                  {
                     "destination": "",
                     "source": "p/demo/addons/godot-openvr/bin/win64/openvr_api.dll",
                     "type": "build"
                  },
                  {
                     "destination": "",
                     "source": "p/demo/addons/godot-openvr/bin/win64/openvr_api.dll.sig",
                     "type": "build"
                  },
                  {
                     "destination": "debug",
                     "source": "p/demo/addons/godot-openvr/bin/win64/libgodot_openvr.dbg.dll",
                     "type": "build"
                  },
                  {
                     "destination": "debug",
                     "source": "p/demo/addons/godot-openvr/bin/win64/libgodot_openvr.pdb",
                     "type": "build"
                  },
                  {
                     "destination": "debug",
                     "source": "p/demo/addons/godot-openvr/bin/win64/openvr_api.pdb",
                     "type": "build"
                  }
               ],
               "environment_variables": [ ],
               "name": "windowsJob",
               "resources": [
                  "linux",
                  "mingw5"
               ],
               "tasks": [
                  {
                     "artifact_origin": "gocd",
                     "destination": "",
                     "job": "windowsJob",
                     "pipeline": "gdextension-cpp",
                     "source": "godot-cpp",
                     "stage": "godotCppStage",
                     "type": "fetch"
                  },
                  {
                     "artifact_origin": "gocd",
                     "destination": "godot-cpp",
                     "job": "windowsJob",
                     "pipeline": "gdextension-cpp",
                     "source": "godot-headers",
                     "stage": "godotCppStage",
                     "type": "fetch"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a godot-cpp/. p/godot-cpp"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": ""
                  },
                  {
                     "arguments": [
                        "-c",
                        "python wrap_openvr.py"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "rm -f demo/addons/godot-openvr/bin/win64/libgodot_openvr*.dll"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "PATH=/opt/llvm-mingw/bin:$PATH scons werror=no platform=windows target=debug -j`nproc` use_lto=no deprecated=no use_mingw=yes use_llvm=yes float=64 use_thinlto=no warnings=no LINKFLAGS=-Wl,-pdb= CCFLAGS='-Wall -Wno-tautological-compare -g -gcodeview' debug_symbols=no"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a openvr/bin/win64/openvr_api.dll demo/addons/godot-openvr/bin/win64/openvr_api.dll"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a openvr/bin/win64/openvr_api.dll.sig demo/addons/godot-openvr/bin/win64/openvr_api.dll.sig"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a openvr/bin/win64/openvr_api.pdb demo/addons/godot-openvr/bin/win64/openvr_api.pdb"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cd demo/addons/godot-openvr/bin/win64 && mv libgodot_openvr.dll libgodot_openvr.dbg.dll && mingw-strip --strip-debug -o libgodot_openvr.dll libgodot_openvr.dbg.dll"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  }
               ]
            },
            {
               "artifacts": [
                  {
                     "destination": "",
                     "source": "p/demo/addons/godot-openvr/bin/x11/libgodot_openvr.so",
                     "type": "build"
                  },
                  {
                     "destination": "",
                     "source": "p/demo/addons/godot-openvr/bin/x11/libopenvr_api.so",
                     "type": "build"
                  },
                  {
                     "destination": "debug",
                     "source": "p/demo/addons/godot-openvr/bin/x11/libgodot_openvr.dbg.so",
                     "type": "build"
                  }
               ],
               "environment_variables": [ ],
               "name": "linuxJob",
               "resources": [
                  "linux",
                  "mingw5"
               ],
               "tasks": [
                  {
                     "artifact_origin": "gocd",
                     "destination": "",
                     "job": "linuxJob",
                     "pipeline": "gdextension-cpp",
                     "source": "godot-cpp",
                     "stage": "godotCppStage",
                     "type": "fetch"
                  },
                  {
                     "artifact_origin": "gocd",
                     "destination": "godot-cpp",
                     "job": "linuxJob",
                     "pipeline": "gdextension-cpp",
                     "source": "godot-headers",
                     "stage": "godotCppStage",
                     "type": "fetch"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a godot-cpp/. p/godot-cpp"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": ""
                  },
                  {
                     "arguments": [
                        "-c",
                        "rm -f demo/addons/godot-openvr/bin/x11/libgodot_openvr.so"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "scons werror=no platform=linux target=debug -j`nproc` use_lto=no deprecated=no use_static_cpp=yes float=64 use_llvm=yes builtin_freetype=yes"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a openvr/bin/linux64/libopenvr_api.so demo/addons/godot-openvr/bin/x11/libopenvr_api.so"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cp -a openvr/bin/linux64/libopenvr_api.so.dbg demo/addons/godot-openvr/bin/x11/libopenvr_api.so.dbg"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  },
                  {
                     "arguments": [
                        "-c",
                        "cd demo/addons/godot-openvr/bin/x11 && mv libgodot_openvr.so libgodot_openvr.dbg.so && strip --strip-debug -o libgodot_openvr.so libgodot_openvr.dbg.so"
                     ],
                     "command": "/bin/bash",
                     "type": "exec",
                     "working_directory": "p"
                  }
               ]
            }
         ],
         "name": "gdextensionBuildStage"
      }
   ]
}
